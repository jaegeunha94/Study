# 요약
1. 해시를 사용하는 이유
2. 해시 특징 3가지
3. 해시 충돌시 해결 방법



# [해시 함수 3가지 특성](https://ckidsm.tistory.com/140)
1. 역상 저항성: 단방향
2. 제2 역상 저항성: 고정된 길이
3. 충돌 저항성

# 배열
* 원소 하나를 저장하고 검색하는데 O(n)의 시간 소요
* 트리는 원소 하나를 저장하고 검색하는데 평균 O(log n)의 시간 소요
  * 저장된 자료가 많아지면 오래걸림
* 저장된 자료의 양과 상관없이 원소 하나를 저장하고 검색하는 것을 상수 시간에 할 수는 없을까?
  * 해시 테이블의 등장

# [해시 테이블](http://mm.sookmyung.ac.kr/~bigrain/class/2011/algorithm/ch06.pdf)
* 임의의 원소를 해시 테이블에 저장하려면
  1. 해당 원소의 해시값을 해시 함수를 이용하여 계산한다
  2. 이 해시값을 주소로 하는 위치에 원소를 저장한다
  3. 저장 후에 검색을 할 때도 원소의 해시값을 계산해 바로 해당 위치로 이동한다
* 이렇게 해시 테이블은 원소를 저장할 위치를 상수 시간에 계산할 수 있다.
* 해시 테이블은 저장된 자료와 비교할 필요 없이 해당 값에 저장하는 형식

# [해시 함수](https://luyin.tistory.com/191)
* 임의의 길이의 데이터를 고정된 길이의 데이터로 매핑하는 함수
  * f(x0 = x mod 13; 최대 12의 값을 가짐

## 좋은 해시 함수의 조건
1. 계산이 간단해야 한다.
2. 입력 원소가 해시 테이블 전체에 고루 저장되어야 한다
  * 해시 충돌을 피하기 위해

# 해시 충돌
* 해시 함수가 서로 다른 두 개의 입력값에 대해 같은 출력값을 내는 상황

## 체이닝
* 같은 주소로 해싱되는 원소를 모두 하나의 연결리스트에 매달아서 관리한다
* 원소를 검색할 때는 해당 연결 리스트의 원소들을 차례로 지나가면서 탐색한다.
* 하지만 체이닝이 길어지면 원소를 검색하는데 짧은 시간이 걸리는 기존의 해싱의 장점이 사라짐

## 개방 주소 방법(Open addressing)
* 체이닝과 달리 어떻게든 주어진 테이블 공간에서 해결한다
* 따라서 모든 원소가 반드시 자신의 해시값과 일치하는 주소에 저장된다는 보장이 없다
* 선형조사(Linear probing), 이차원 조사(quardratic probing), 더블 해싱(double hashing)

### 선형 조사
* 가장 간단한 충돌 해결 방법
* 충돌이 일어난 자리에 관한 일차 함수의 보폭으로 점프한다
* hi(x)는 h(x)에서 i만큼 떨어진 자리이다
* 테이블의 경계를 넘어갈 경우에는 맨 앞으로 돌아간다


### 이차원 조사
* 바로 뒷자리를 보는 대신 보폭을 이차 함수로 넓혀가면서 본다
* 예를 들어 i번째 해시 함수롤 h(x)에서 i^2만큼 떨어진 자리로 삼는다
* 특정 영역에 원소가 몰려도 그 영역을 빨리 벗어날 수 있다.

### 더블 해싱
* 두 개의 함수를 이용한다
* 하나의 함수는 최초의 해시값을 얻을 때, 다른 하나의 함수는 해시 충돌이 일어났을 때 이동할 폭을 얻을 때 사용한다
* 두 원소의 첫 번째 해시값이 같더라도 두 번쨰  해시값까지 같은 화률은 매우 작으므로 서도 다른 보폭으로 점프하게 한다.

# 해시 함수의 특징
* 같은 입력값에 대해서 같은 출력값이 보장된다
* 서로 다른 입력값으로부터 동일한 출력값이 나올 가능성이 희박하므로 입력값에 대한 무결성이 보장된다
* 일방향성을 갖는다.


## [솔트, 스트레칭](http://www.itworld.co.kr/news/94202)

## 레인보우 테이블
레인보우 테이블(rainbow table)은 해시함수(MD-5, SHA-1, SHA-2 등)를 사용하여 만들어낼 수 있는 값들을 대량으로 저장한 표이다.   
보통 해시함수를 이용하여 저장된 비밀번호로부터 원래의 비밀번호를 추출해 내는데 사용된다.

## 사용시 주의점
* 해커들은 레인보우 테이블을 보고 입력값을 예측할 수 있다. 그럴 때 필요한게 Salt 이다.
1. Salt의 사용; 원본에 첨가해서 해시값을 다르게 만드는 값
  * Brute-Force Attack(무작위로 문자열을 대입하는 해킹 기법)에 대처하기 위해
  * Salt의 길이를 최대한 길게, 안전하게 보관한다.
2. Key-Stretching: 해시값을 여러번 해시값에 넣기를 반복하여 해킹을 방지
3. 데이터 충돌을 방지해야 한다.
  * 리스트를 데이터로 관리하는 Chaining 기법을 사용
  * 위치를 조정하는 Open Addressing 기법 사용


# SHA

* NSA에의해 1993년 처음 개발된 해시 알고리즘
* 현재 주로 사용되는 것은 SHA-2 함수군으로, 다이제스트의 깅리에 따라 SHA-256 SHA-512 등으로 나뉜다
* SHA-0, SHA-1까지는 해시 충돌성이 존재하지만 256, 512는 해시 충돌성이 사실상 0에 수렴한다
* 2256의 의미: 해싱을 하면 2^256개의 해시값 중 하나가 나타난다
  
## SHA-2 계열
* 보안을 위한 암호화 할 때 사용
* MD5나 SHA-1의 경우 충돌 및 보안 결함이 발견되어 보안용도로는 더이상 사용하지 않는다.


# 리눅스
* 리눅스 비밀번호(/etc/passwd)도 해시값 사용
